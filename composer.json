{
    "name": "acquia/acquia_cms",
    "type": "drupal-profile",
    "description": "An implementation of Drupal 9 for running custom, low code websites on the Acquia platform.",
    "homepage": "https://github.com/acquia/acquia_cms",
    "license": "GPL-2.0-or-later",
    "authors": [
        {
            "name": "Michael Sherron",
            "email": "michael.sherron@acquia.com",
            "role": "Author"
        },
        {
            "name": "Acquia Engineering",
            "email": "engineering@acquia.org",
            "role": "Maintainer"
        }
    ],
    "require": {
        "drupal/acquia_claro": "^1.3.2",
        "drupal/acquia_cms_audio": "^1.3.2",
        "drupal/acquia_cms_component": "^1.3.1",
        "drupal/acquia_cms_site_studio": "^1.3.5",
        "drupal/acquia_cms_starter": "^1.3.0",
        "drupal/acquia_cms_toolbar": "^1.3.3",
        "drupal/acquia_cms_tour": "^1.3.0",
        "drush/drush": "^10 || ^11"
    },
    "require-dev": {
        "acquia/coding-standards": "^1.0",
        "axelerant/drupal-quality-checker": "^1.1",
        "drupal/core-composer-scaffold": "^9.0.0",
        "drupal/core-dev": "^9",
        "ergebnis/composer-normalize": "~2.15.0",
        "friendsoftwig/twigcs": "^4 || ^5",
        "oomphinc/composer-installers-extender": "^1.1 || ^2",
        "phpspec/prophecy-phpunit": "^2.0",
        "phpunit/phpunit": "~9.4.0 || ~9.5.0",
        "weitzman/drupal-test-traits": "^1.5"
    },
    "config": {
        "allow-plugins": {
            "composer/installers": true,
            "cweagans/composer-patches": true,
            "dealerdirect/phpcodesniffer-composer-installer": true,
            "drupal/core-composer-scaffold": true,
            "ergebnis/composer-normalize": true,
            "oomphinc/composer-installers-extender": true,
            "phpro/grumphp-shim": true,
            "webdriver-binary/binary-chromedriver": true
        },
        "preferred-install": {
            "drupal/core": "dist"
        },
        "process-timeout": 0,
        "sort-packages": true
    },
    "extra": {
        "drupal-scaffold": {
            "allowed-packages": [
                "drupal/core"
            ],
            "file-mapping": {
                "[project-root]/.editorconfig": false,
                "[project-root]/.gitattributes": false,
                "[web-root]/.csslintrc": false,
                "[web-root]/INSTALL.txt": false,
                "[web-root]/drush/Commands/SiteInstallCommands.php": "src/Commands/SiteInstallCommands.php",
                "[web-root]/drush/drush.yml": "drush/drush.yml",
                "[web-root]/example.gitignore": false,
                "[web-root]/modules/README.txt": false,
                "[web-root]/profiles/README.txt": false,
                "[web-root]/robots.txt": false,
                "[web-root]/sites/README.txt": false,
                "[web-root]/sites/default/default.settings.php": {
                    "append": "./patches/d9-acms-settings.patch"
                },
                "[web-root]/themes/README.txt": false,
                "[web-root]/themes/contrib/cohesion-theme/templates/maintenance-page.html.twig": "./patches/maintenance-page.patch",
                "[web-root]/web.config": false
            },
            "locations": {
                "project-root": ".",
                "web-root": "./docroot"
            }
        },
        "enable-patching": true,
        "installer-paths": {
            "docroot/core": [
                "type:drupal-core"
            ],
            "docroot/libraries/{$name}": [
                "type:drupal-library",
                "type:bower-asset",
                "type:npm-asset"
            ],
            "docroot/modules/contrib/{$name}": [
                "type:drupal-module"
            ],
            "docroot/profiles/contrib/{$name}": [
                "type:drupal-profile"
            ],
            "docroot/themes/contrib/{$name}": [
                "type:drupal-theme"
            ]
        },
        "installer-types": [
            "bower-asset",
            "npm-asset"
        ],
        "patchLevel": {
            "drupal/core": "-p2"
        },
        "patches": {
            "drupal/core": {
                "Drupal Core add is-syncing paramemeter": "https://www.drupal.org/files/issues/2020-03-13/3118155_4.patch"
            },
            "acquia/cohesion": {
                "DO NOT import packages, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/fa9343ab9912dac31f6aee6022b69c0f/raw/a7387cd04b6d6f4ba76d197881d0aa90589a2dca/do-not-import-package-when-syncing.patch"
            },
            "drupal/config_rewrite": {
                "DO NOT rewrite configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/a3169616a299f8794acadd8b5f874d4a/raw/84efffc63196dd83aa689021c3a6201f0e28da37/donot-config-rewrite-if-config-syncing.patch"
            },
            "drupal/acquia_cms_common": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/c0afca2ec539fe9cc7eab754728ea297/raw/69a395ba8328bce15e262a8de438a637d8bef937/donot-import-config-if-config-syncing.patch",
                "The acquia_cms_commont configurations updated": "https://gist.githubusercontent.com/vishalkhode1/c68dd31432f4eadd9b9641f270231dca/raw/6c2e80a40c1d4335ed49ba03618d72ae51b7faa9/acquia-cms-common-config-updated.patch"
            },
            "drupal/acquia_cms_page": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/fec3f5d1d5c3d6d5c6769891867776da/raw/2ca783707c3cbe6cfa4c92a06d004c17587ab301/donot-import-config-if-config-syncing.patch",
                "The acquia_cms_page configurations updated": "https://gist.githubusercontent.com/vishalkhode1/bdc10c92a4a5963cd889cb487464cd3b/raw/79956cc833a20df127642854c9fe161b25d80c5e/acquia-cms-page-config-updated.patch"
            },
            "drupal/acquia_cms_search": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/4c13e0d8672a906d2a47d6c40bdc32c9/raw/3abd46f9ee6e008b0f4cd3c46211e7f42a51c14b/donot-import-config-if-config-syncing.patch",
                "The acquia_cms_search configurations updated": "https://gist.githubusercontent.com/vishalkhode1/2bde4e76f9d0afa9ed3237405f9d3c63/raw/0d1591a3efc146e4fc39fd38b32a43041c5129f2/acquia-cms-search-config-updated.patch"
            },
            "drupal/acquia_cms_site_studio": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/c25aee513956b7dbc1cb3980cc995144/raw/06cb615af6d397408b6eec3c1fd913b7a2573b30/donot-import-config-if-config-syncing.patch",
                "The acquia_cms_site_studio configurations updated": "https://gist.githubusercontent.com/vishalkhode1/82455be840c385ef89c78dcdc665f96b/raw/4c7843793da4c6878d27e01e5e1b2f48aad22f91/acquia-cms-site-studio-config-updated.patch"
            },
            "drupal/acquia_cms_starter": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/1742a3b98791efe23b9567ab10fbaf31/raw/8ad927dd3ed260991b5ba06dc9da036bf29fc3cd/donot-import-config-if-config-syncing.patch"
            },
            "drupal/acquia_cms_tour": {
                "DO NOT import configurations, if configuration sync is in progress": "https://gist.githubusercontent.com/vishalkhode1/2c657ac7700c0902ebbed36110769ea6/raw/d5a8fe9023d1fe7b3f52cb369286a3f0653c1f5e/donot-import-config-if-config-syncing.patch"
            },
            "drupal/acquia_cms_image": {
                "The acquia_cms_image configurations updated": "https://gist.githubusercontent.com/vishalkhode1/df5c23b1bdcddcd37f5d2e5fc15f7710/raw/3d8d6587a9fc29cc0c1248a8aaaee49438d9f717/acquia-cms-image-config-updated.patch"
            },
            "drupal/acquia_cms_video": {
                "The acquia_cms_video configurations updated": "https://gist.githubusercontent.com/vishalkhode1/394e7c71e3dccd74fcbf63f37f02f176/raw/82c0a5eea2a04f25920003456394aad573774a58/acquia-cms-video-config-updated.patch"
            },
            "drupal/acquia_cms_person": {
                "The acquia_cms_person configurations updated": "https://gist.githubusercontent.com/vishalkhode1/c70a2113ef17286d88db2a04c6affced/raw/c5c22d89d309b8f1469270b59578a3bffd78be29/acquia-cms-person-config-updated.patch"
            },
            "drupal/acquia_cms_document": {
                "The acquia_cms_document configurations updated": "https://gist.githubusercontent.com/vishalkhode1/4d129a3001b2384e6d020cd5576b300c/raw/7968b51d69160f52e28799702329e0882b0849a4/acquia-cms-document-config-updated.patch"
            },
            "drupal/acquia_cms_event": {
                "The acquia_cms_event configurations updated": "https://gist.githubusercontent.com/vishalkhode1/fe58c645667cb1c12172b19a5a83c5c5/raw/5cb92063aebc8aa9352e7021e96b78d0cb9690f5/acquia-cms-event-config-updated.patch"
            },
            "drupal/acquia_cms_place": {
                "The acquia_cms_place configurations updated": "https://gist.githubusercontent.com/vishalkhode1/611415b1e024f2d4ab4a16182e166040/raw/d7b7e0998feb44ff7ff75b46d26c7ef61b24a968/acquia-cms-place-config-updated.patch"
            },
            "drupal/acquia_cms_article": {
                "The acquia_cms_article configurations updated": "https://gist.githubusercontent.com/vishalkhode1/b8ff0439ad85946de52cb25a232802fc/raw/032427ec665fc0c2996985fcd0f303cdf8d9399a/acquia-cms-article-config-updated.patch "
            }
        }
    },
    "autoload": {
        "psr-4": {
            "Acquia\\Utility\\": "src/Utility"
        },
        "classmap": [
            "src/Composer/ConfigureProject.php"
        ]
    },
    "repositories": {
        "drupal": {
            "type": "composer",
            "url": "https://packages.drupal.org/8"
        }
    },
    "minimum-stability": "dev",
    "prefer-stable": true,
    "scripts": {
        "pre-update-cmd": [
            "@putenv COMPOSER_MEMORY_LIMIT=2G"
        ],
        "post-update-cmd": [
            "Composer\\Config::disableProcessTimeout",
            "@putenv PROFILE_DIR=./docroot/profiles/contrib/acquia_cms",
            "@putenv MODULES_DIR=./docroot/profiles/contrib/acquia_cms/modules",
            "if [ \"$PIPELINE_ENV\" != \"true\" ]; then composer build:local; fi;"
        ],
        "acms:install": [
            "bash install-acms"
        ],
        "build:frontend": [
            "Composer\\Config::disableProcessTimeout",
            "cd themes/acquia_claro && npm run build",
            "mkdir -p modules/acquia_cms_toolbar/css",
            "cp themes/acquia_claro/css/acquia_cms_toolbar.css modules/acquia_cms_toolbar/css"
        ],
        "build:local": [
            "mkdir -p $PROFILE_DIR $MODULES_DIR",
            "find $PWD -name 'acquia_cms.*' -type f -maxdepth 1 -exec ln -s -f '{}' $PROFILE_DIR ';'",
            "find ./docroot/modules/contrib -type d -maxdepth 1 -name \"acquia_cms*\" -exec cp -r '{}' $MODULES_DIR ';'",
            "ln -s -f $PWD/config $PROFILE_DIR",
            "ln -s -f $PWD/misc $PROFILE_DIR",
            "ln -s -f $PWD/src $PROFILE_DIR",
            "ln -s -f $PWD/tests $PROFILE_DIR",
            "cp -f phpunit.xml ./docroot/core"
        ],
        "cohesion:fixture": [
            "@putenv FILES_DIR=./docroot/sites/default/files",
            "drush config:export --yes --quiet --destination $TMPDIR/cex",
            "mkdir -p $FILES_DIR/cohesion/config",
            "cp -f $TMPDIR/cex/cohesion_* $FILES_DIR/cohesion/config",
            "tar -c -z -f ./tests/cohesion.tar.gz --directory $FILES_DIR cohesion",
            "rm -rf $TMPDIR/cex"
        ],
        "configure-tarball": "Drupal\\acquia_cms\\Composer\\ConfigureProject::execute",
        "install:frontend": [
            "Composer\\Config::disableProcessTimeout",
            "cd themes/acquia_claro && npm install"
        ],
        "nuke": "rm -r -f docroot vendor"
    }
}
